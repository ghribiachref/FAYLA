<div class="container mt-5" [dir]="languageService.currentLang==='ar' ? 'rtl' : 'ltr'">

  <h2 class="mb-4 text-center">
    {{ languageService.currentLang==='en' ? 'Order Form' : 'نموذج الطلب' }}
  </h2>

  <form (ngSubmit)="sendOrder()" #orderForm="ngForm">
    <!-- First Name -->
    <div class="mb-3">
      <label class="form-label">
        {{ languageService.currentLang==='en' ? 'First Name' : 'الاسم الأول' }} <span class="text-danger">*</span>
      </label>
      <input type="text" class="form-control"
             [(ngModel)]="customer.firstName"
             name="firstName"
             required
             [class.is-invalid]="orderForm.submitted && !customer.firstName.trim()">
      <div class="invalid-feedback" *ngIf="orderForm.submitted && !customer.firstName.trim()">
        {{ languageService.currentLang==='en' ? 'First name is required.' : 'الاسم الأول مطلوب.' }}
      </div>
    </div>

    <!-- Last Name -->
    <div class="mb-3">
      <label class="form-label">
        {{ languageService.currentLang==='en' ? 'Last Name' : 'اللقب' }} <span class="text-danger">*</span>
      </label>
      <input type="text" class="form-control"
             [(ngModel)]="customer.lastName"
             name="lastName"
             required
             [class.is-invalid]="orderForm.submitted && !customer.lastName.trim()">
      <div class="invalid-feedback" *ngIf="orderForm.submitted && !customer.lastName.trim()">
        {{ languageService.currentLang==='en' ? 'Last name is required.' : 'اللقب مطلوب.' }}
      </div>
    </div>

    <!-- Address -->
    <div class="mb-3">
      <label class="form-label">
        {{ languageService.currentLang==='en' ? 'Delivery Address' : 'عنوان التوصيل' }} <span class="text-danger">*</span>
      </label>
      <input type="text" class="form-control"
             [(ngModel)]="customer.address"
             name="address"
             required
             [class.is-invalid]="orderForm.submitted && !customer.address.trim()">
      <div class="invalid-feedback" *ngIf="orderForm.submitted && !customer.address.trim()">
        {{ languageService.currentLang==='en' ? 'Address is required.' : 'العنوان مطلوب.' }}
      </div>
    </div>

    <!-- Phone -->
    <div class="mb-3">
      <label class="form-label">
        {{ languageService.currentLang==='en' ? 'Phone' : 'رقم الهاتف' }} <span class="text-danger">*</span>
      </label>
      <input type="text" class="form-control"
             [(ngModel)]="customer.phone"
             name="phone"
             required
             pattern="[0-9]{8}"
             placeholder="98 123 456"
             maxlength="11"
             [class.is-invalid]="getPhoneDigitsCount() !== 8">
      <div class="invalid-feedback" *ngIf="getPhoneDigitsCount() !== 8">
        {{ languageService.currentLang==='en' ? 'Must contain exactly 8 digits.' : 'يجب أن يحتوي على 8 أرقام بالضبط.' }}
      </div>
      <small class="d-block mt-1"
             [class.text-success]="getPhoneDigitsCount() === 8"
             [class.text-danger]="getPhoneDigitsCount() > 0 && getPhoneDigitsCount() < 8"
             [class.text-muted]="getPhoneDigitsCount() === 0">
        <strong>{{ getPhoneDigitsCount() }}</strong> {{ languageService.currentLang==='en' ? 'of 8 digits' : 'من 8 أرقام' }}
      </small>
    </div>

    <!-- Submit -->
    <button type="submit" class="btn btn-success btn-lg w-100 mt-3"
            [disabled]="!isFormValid()">
      {{ languageService.currentLang==='en' ? 'Send Order via Messenger' : 'إرسال الطلب عبر ماسنجر' }}
    </button>

    <p class="text-center mt-3 text-muted small">
      {{ languageService.currentLang==='en' ? 'You will be redirected to Messenger to finalize your order.' : 'سيتم توجيهك إلى ماسنجر لإكمال طلبك.' }}
    </p>
  </form>
</div>
